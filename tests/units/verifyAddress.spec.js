import { decodePayment } from 'dist'

describe('verifies address', () => {

  const validExamples = {
    'arbitrum': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '0xa4b1': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '42161': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    'avalanche': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '0xa86a': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '43114': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    'base': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '0x2105': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '8453': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    'bsc': '0xdb3f47b1D7B577E919D639B4FD0EBcEFD4aABb70',
    '0x38': '0xdb3f47b1D7B577E919D639B4FD0EBcEFD4aABb70',
    '56': '0xdb3f47b1D7B577E919D639B4FD0EBcEFD4aABb70',
    'ethereum': '0xF491525C7655f362716335D526E57b387799d058',
    '0x1': '0xF491525C7655f362716335D526E57b387799d058',
    '1': '0xF491525C7655f362716335D526E57b387799d058',
    'fantom': '0x78C0F1c712A9AA2004C1F401A7307d8bCB62abBd',
    '0xfa': '0x78C0F1c712A9AA2004C1F401A7307d8bCB62abBd',
    '250': '0x78C0F1c712A9AA2004C1F401A7307d8bCB62abBd',
    'gnosis': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '0x64': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '100': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    'optimism': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '0xa': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    '10': '0x5EC3153BACebb5e49136cF2d457f26f5Df1B6780',
    'polygon': '0x39E7C98BF4ac3E4C394dD600397f5f7Ee3779BE8',
    '0x89': '0x39E7C98BF4ac3E4C394dD600397f5f7Ee3779BE8',
    '137': '0x39E7C98BF4ac3E4C394dD600397f5f7Ee3779BE8',
    'solana': 'DePayRG7ZySPWzeK9Kvq7aPeif7sdbBZNh6DHcvNj7F7',
  }

  for (const key in validExamples) {

    it(`verifies valid address for ${key}`, ()=> {
      expect(
        decodePayment({
          blockchain: key,
          address: validExamples[key],
          transaction: '0x422feecb00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000055b5f5b94000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002386f26fc100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000003fc91a3afd70395cd496c647d5a6cc9d4b2b7fad0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000008b277154218ccf3380cae48d630da13462e395000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004600000000000000000000000000000000000000000000000000000000064f1de86000000000000000000000000000000000000000000000000000000000000026424856bc30000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000020b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000005594aa3e67400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000005594aa3e674000000000000000000000000000000000000000000000000002386f26fc1000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002bc02aaa39b223fe8d0a0e5c4f27ead9083c756cc20001f46b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000000'
        })
      ).not.toEqual(undefined)
    })
  }

  it(`flags invalid addresses as invalid`, ()=>{

    expect(
      decodePayment({
        blockchain: 'ethereum',
        address: '0x123',
        transaction: '0x422feecb00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000055b5f5b94000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002386f26fc100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000003fc91a3afd70395cd496c647d5a6cc9d4b2b7fad0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000008b277154218ccf3380cae48d630da13462e395000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000004600000000000000000000000000000000000000000000000000000000064f1de86000000000000000000000000000000000000000000000000000000000000026424856bc30000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000020b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000005594aa3e67400000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000005594aa3e674000000000000000000000000000000000000000000000000002386f26fc1000000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002bc02aaa39b223fe8d0a0e5c4f27ead9083c756cc20001f46b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000000'
      })
    ).toEqual(undefined)
  })
})
